(self.webpackChunk=self.webpackChunk||[]).push([[641],{7482:(t,e,a)=>{"use strict";a.d(e,{Z:()=>n});const s={props:{},data:function(){return{showNav:!1}},created:function(){},mounted:function(){},computed:{app:function(){return this.$page.props.app},user:function(){return this.$page.props.user},navbarActive:function(){return this.showNav?"active":""},navbar:function(){return this.$page.props.navBar}},watch:{},methods:{}};const n=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-layout"},[a("nav",{staticClass:"navbar top-navbar fixed-top"},[a("div",{staticClass:"navbar-logo-wrapper d-flex"},[a("inertia-link",{staticClass:"navbar-logo",attrs:{href:t.route("dashboard")}},[a("img",{staticClass:"mr-2",attrs:{src:t.app.logo,alt:t.app.name}})])],1),t._v(" "),a("div",{staticClass:"navbar-brand d-none d-md-flex"},[a("h2",[t._v(t._s(t.app.name))])]),t._v(" "),a("div",{staticClass:"navbar-data"},[a("inertia-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-muted",attrs:{href:t.route("about"),title:"About "+t.app.name}},[a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"link",title:"Account"},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("b-avatar",{attrs:{variant:"warning",text:t.user.initials}})]},proxy:!0}])},[t._v(" "),a("inertia-link",{attrs:{as:"b-dropdown-item",href:t.route("settings.index")}},[a("i",{staticClass:"fas fa-cog"}),t._v(" Settings")]),t._v(" "),a("inertia-link",{attrs:{as:"b-dropdown-item",href:t.route("password.edit","change")}},[a("i",{staticClass:"fas fa-key"}),t._v(" Change Password")]),t._v(" "),a("b-dropdown-divider"),t._v(" "),a("inertia-link",{attrs:{as:"b-dropdown-item",method:"post",href:t.route("logout")}},[a("i",{staticClass:"fas fa-sign-out-alt"}),t._v(" Logout")])],1),t._v(" "),a("button",{staticClass:"navbar-toggler d-lg-none",attrs:{type:"button"},on:{click:function(e){t.showNav=!t.showNav}}},[a("i",{staticClass:"fas fa-bars"})])],1)]),t._v(" "),a("div",{staticClass:"container-fluid page-body-wrapper"},[a("nav",{staticClass:"sidebar sidebar-nav",class:t.navbarActive,attrs:{id:"side-nav"}},[a("ul",{staticClass:"nav"},t._l(t.navbar,(function(e){return a("li",{key:e.name,staticClass:"nav-item"},[a("inertia-link",{staticClass:"nav-link",attrs:{href:e.route}},[a("i",{staticClass:"menu-icon",class:e.icon}),t._v(" "),a("span",{staticClass:"menu-title"},[t._v(t._s(e.name))])])],1)})),0)]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content-wrapper"},[a("b-alert",{attrs:{variant:t.$page.props.flash.type,show:!!t.$page.props.flash.message&&30}},[a("p",{staticClass:"text-center"},[t._v(t._s(t.$page.props.flash.message))])]),t._v(" "),t._t("default")],2),t._v(" "),a("axios-error"),t._v(" "),a("footer",{staticClass:" footer page-footer"},[a("div",{staticClass:"d-sm-flex justify-content-center justify-content-sm-between"},[t._m(0),t._v(" "),a("span",{staticClass:"text-muted float-none float-sm-right d-block mt-1 mt-sm-0 text-center"},[t._v(t._s(t.app.version))])])])],1)])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"text-muted text-center text-sm-left d-block d-sm-inline-block"},[t._v("Copyright Â© 2016-2021"),a("span",{staticClass:"d-none d-md-inline"},[t._v(" Butcherman - All rights reserved.")])])}],!1,null,null,null).exports},8641:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});const s={layout:a(7482).Z,props:{can_create:{type:Boolean,default:!1},equip_types:{type:Array,required:!0}},data:function(){return{table:{loading:!0,columns:[{label:"Customer Name",field:"name",filterOptions:{enabled:!0,placeholder:"Search for Customer by Name or Customer ID"}},{label:"City",field:"city",filterOptions:{enabled:!0,placeholder:"Search by City"}},{label:"Equipment",field:"equipment",filterOptions:{enabled:!0,placeholder:"Search by Equipment Type",filterDropdownItems:this.equip_types}}],rows:[]},pagination:{links:{},meta:{total:0}},searchParam:{page:null,perPage:25,sortField:"name",sortType:"asc",name:null,city:null,equipment:null}}},mounted:function(){this.search()},methods:{search:function(){var t=this;this.table.loading=!0,axios.post(this.route("customers.search"),this.searchParam).then((function(e){t.table.rows=e.data.data,t.pagination.meta.total=e.data.total}))},filterSearch:function(t){this.searchParam.page=1,this.searchParam.name=t.columnFilters.name?t.columnFilters.name:null,this.searchParam.city=t.columnFilters.city?t.columnFilters.city:null,this.searchParam.equipment=t.columnFilters.equipment,this.search()},newPage:function(t){this.searchParam.page=t.currentPage,this.search()},reSort:function(t){this.searchParam.sortField=t[0].field,this.searchParam.sortType=t[0].type,this.search()},perPageUpdate:function(t){this.searchParam.perPage=t.currentPerPage,this.search()}}};const n=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("div",{staticClass:"row grid-margin"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("vue-good-table",{attrs:{mode:"remote",columns:t.table.columns,rows:t.table.rows,isLoading:t.table.loading,totalRows:t.pagination.meta.total,"pagination-options":{enabled:!0,mode:"records",perPage:t.searchParam.perPage,position:"bottom",perPageDropdown:[25,50,100,250],dropdownAllowAll:!0}},on:{"update:isLoading":function(e){return t.$set(t.table,"loading",e)},"update:is-loading":function(e){return t.$set(t.table,"loading",e)},"on-column-filter":t.filterSearch,"on-page-change":t.newPage,"on-sort-change":t.reSort,"on-per-page-change":t.perPageUpdate},scopedSlots:t._u([{key:"loadingContent",fn:function(){return[a("atom-loader")]},proxy:!0},{key:"table-actions",fn:function(){return[t.can_create?a("inertia-link",{attrs:{as:"b-button",variant:"info",href:t.route("customers.create"),pill:"",size:"sm"}},[a("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" Add New Customer")]):t._e()]},proxy:!0},{key:"emptystate",fn:function(){return[t.table.loading?t._e():a("h4",{staticClass:"text-center"},[t._v("No Customers Found")])]},proxy:!0},{key:"table-row",fn:function(e){return["name"===e.column.field?a("span",[a("inertia-link",{attrs:{href:t.route("customers.show",e.row.slug)}},[t._v(t._s(e.row.name))])],1):"equipment"===e.column.field?a("span",[t._l(e.row.customer_equipment,(function(e){return a("div",{key:e.cust_equip_id},[t._v("\n                                    "+t._s(e.name)+"\n                                ")])})),t._v(" "),t._l(e.row.parent_equipment,(function(e){return a("div",{key:e.equip_id},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip:hover",arg:"hover"}],staticClass:"fas fa-share",attrs:{title:"Equipment Belongs to Parent Site"}}),t._v("\n                                    "+t._s(e.name)+"\n                                ")])}))],2):t._e()]}}])})],1)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row grid-margin"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"text-center text-md-left"},[t._v("Customers")])])])}],!1,null,null,null).exports}}]);